#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
"""

import os


def check_existing_env():
    """–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è"""
    print("üîç –ü–†–û–í–ï–†–ö–ê –°–£–©–ï–°–¢–í–£–Æ–©–ò–• –ü–ï–†–ï–ú–ï–ù–ù–´–• –û–ö–†–£–ñ–ï–ù–ò–Ø")
    print("="*60)
    
    # –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–∑ invest.py
    env_vars = {
        'INVEST_TOKEN': '–¢–æ–∫–µ–Ω –¢–∏–Ω—å–∫–æ—Ñ—Ñ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)',
        'YA_ACCESS_KEY': '–ö–ª—é—á –¥–æ—Å—Ç—É–ø–∞ Yandex S3 (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)',
        'YA_SECRET_KEY': '–°–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á Yandex S3 (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)',
        'BUCKET_NAME': '–ò–º—è bucket Yandex S3 (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)',
        'DAYS_BACK': '–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–Ω–µ–π –Ω–∞–∑–∞–¥ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)',
        'GSHEETS_SERVICE_ACCOUNT_JSON': 'JSON –∫–ª—é—á Google Sheets (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)',
        'GSHEETS_SPREADSHEET': 'ID —Ç–∞–±–ª–∏—Ü—ã Google Sheets (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)',
        'GSHEETS_WORKSHEET': '–ù–∞–∑–≤–∞–Ω–∏–µ –ª–∏—Å—Ç–∞ Google Sheets (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)',
        'SUPABASE_KEY': '–ö–ª—é—á Supabase (–¥–ª—è –Ω–æ–≤–æ–π –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏)'
    }
    
    print("üìã –°—Ç–∞—Ç—É—Å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö:")
    for var, –æ–ø–∏—Å–∞–Ω–∏–µ in env_vars.items():
        value = os.environ.get(var)
        if value:
            if var == 'INVEST_TOKEN':
                print(f"   ‚úÖ {var}: {'*' * min(len(value), 20)}... - {–æ–ø–∏—Å–∞–Ω–∏–µ}")
            elif var == 'SUPABASE_KEY':
                print(f"   ‚úÖ {var}: {'*' * min(len(value), 20)}... - {–æ–ø–∏—Å–∞–Ω–∏–µ}")
            else:
                print(f"   ‚úÖ {var}: {'*' * min(len(value), 10)}... - {–æ–ø–∏—Å–∞–Ω–∏–µ}")
        else:
            print(f"   ‚ùå {var}: –ù–ï –ù–ê–°–¢–†–û–ï–ù–ê - {–æ–ø–∏—Å–∞–Ω–∏–µ}")
    
    print("\n" + "="*60)
    
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è
    –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ = ['INVEST_TOKEN', 'YA_ACCESS_KEY', 'YA_SECRET_KEY', 'BUCKET_NAME']
    –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ = all(os.environ.get(var) for var in –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ)
    
    if –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ:
        print("üéâ –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω—ã!")
        print("üí° –ú–æ–∂–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç—å:")
        print("   python3 invest.py                    # –û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π —Å–∫—Ä–∏–ø—Ç")
        print("   python3 invest_with_supabase.py      # –° –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π Supabase")
    else:
        print("‚ö†Ô∏è –ù–µ –≤—Å–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã")
        print("üîß –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏ –ø–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞")
    
    print("\n" + "="*60)
    print("üîç –ö–ê–ö –ù–ê–ô–¢–ò –ü–ï–†–ï–ú–ï–ù–ù–´–ï:")
    print("="*60)
    print("1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–∞–π–ª .env –≤ —Ç–µ–∫—É—â–µ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏")
    print("2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–∞–π–ª .bashrc –∏–ª–∏ .zshrc")
    print("3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã")
    print("4. –ó–∞–ø—É—Å—Ç–∏—Ç–µ: env | grep -E '(INVEST|YA_|BUCKET|SUPABASE)'")


if __name__ == "__main__":
    check_existing_env()